export const TOP_PRODUCTS = [
    // --- Cooking Essentials ---
    { id: 1, name: "Iodized Salt", category: "Cooking Essentials", price: 25, sales: 5400, stock: 500, trend: "stable" },
    { id: 2, name: "Sunflower Oil", category: "Cooking Essentials", price: 280, sales: 3200, stock: 200, trend: "up" },
    { id: 3, name: "White Sugar", category: "Cooking Essentials", price: 95, sales: 4100, stock: 350, trend: "up" },
    { id: 4, name: "Chilli Powder", category: "Cooking Essentials", price: 150, sales: 1800, stock: 100, trend: "stable" },
    { id: 5, name: "Garam Masala", category: "Cooking Essentials", price: 220, sales: 1500, stock: 80, trend: "up" },
    { id: 6, name: "Momo Masala", category: "Cooking Essentials", price: 80, sales: 2500, stock: 150, trend: "up" },
    { id: 7, name: "Chatpate Masala", category: "Cooking Essentials", price: 60, sales: 1900, stock: 120, trend: "down" },
    { id: 8, name: "Bajeko Sekuwa Masala", category: "Cooking Essentials", price: 350, sales: 800, stock: 40, trend: "up" },
    { id: 9, name: "Everest Chole Masala", category: "Cooking Essentials", price: 120, sales: 600, stock: 60, trend: "stable" },
    { id: 10, name: "Pure Ghee", category: "Cooking Essentials", price: 1200, sales: 500, stock: 30, trend: "up" },
    { id: 11, name: "Tamarind Concentrate", category: "Cooking Essentials", price: 180, sales: 400, stock: 50, trend: "stable" },

    // --- Grains & Pulses ---
    { id: 12, name: "Mansuli Rice (25kg)", category: "Grains", price: 2100, sales: 1200, stock: 100, trend: "up" },
    { id: 13, name: "Basmati Rice (Premium)", category: "Grains", price: 3500, sales: 600, stock: 50, trend: "up" },
    { id: 14, name: "White Rice (Standard)", category: "Grains", price: 1800, sales: 1500, stock: 120, trend: "stable" },
    { id: 15, name: "Wheat Flour (Atta 5kg)", category: "Grains", price: 450, sales: 2800, stock: 200, trend: "stable" },
    { id: 16, name: "Buckwheat Flour", category: "Grains", price: 300, sales: 400, stock: 40, trend: "up" },
    { id: 17, name: "Red Lentils (Masoor)", category: "Pulses", price: 160, sales: 3000, stock: 250, trend: "up" },
    { id: 18, name: "Black Chana", category: "Pulses", price: 140, sales: 2200, stock: 180, trend: "stable" },
    { id: 19, name: "Beaten Rice (Chiura)", category: "Grains", price: 110, sales: 2600, stock: 300, trend: "up" },

    // --- Fresh Produce ---
    { id: 20, name: "Potatoes (Red)", category: "Vegetables", price: 60, sales: 8000, stock: 1000, trend: "down" },
    { id: 21, name: "Onions", category: "Vegetables", price: 85, sales: 7500, stock: 800, trend: "up" },
    { id: 22, name: "Tomatoes", category: "Vegetables", price: 120, sales: 5000, stock: 300, trend: "up" },
    { id: 23, name: "Bananas (Dzen)", category: "Fruits", price: 140, sales: 3000, stock: 150, trend: "stable" },

    // --- Snacks & Confectionery ---
    { id: 24, name: "Instant Noodles (Wai Wai)", category: "Snacks", price: 25, sales: 15000, stock: 2000, trend: "up" },
    { id: 25, name: "Glucose Biscuits", category: "Snacks", price: 20, sales: 8000, stock: 1000, trend: "stable" },
    { id: 26, name: "Lays Magic Masala", category: "Snacks", price: 50, sales: 6000, stock: 500, trend: "up" },
    { id: 27, name: "Rato Bhale Lapsi Candy", category: "Snacks", price: 150, sales: 2000, stock: 100, trend: "up" },
    { id: 28, name: "Mixed Titaura", category: "Snacks", price: 100, sales: 3500, stock: 200, trend: "up" },
    { id: 29, name: "Soan Papdi", category: "Snacks", price: 300, sales: 500, stock: 60, trend: "down" },
    { id: 30, name: "Hajmola Candy", category: "Snacks", price: 40, sales: 4000, stock: 400, trend: "stable" },
    { id: 31, name: "Cadbury Dairy Milk", category: "Snacks", price: 80, sales: 3200, stock: 250, trend: "up" },
    { id: 32, name: "Hard Churpi", category: "Snacks", price: 50, sales: 1200, stock: 150, trend: "up" },
    { id: 33, name: "Coconut Candy", category: "Snacks", price: 10, sales: 2500, stock: 500, trend: "stable" },
    { id: 34, name: "Rato Bhale Misri", category: "Snacks", price: 90, sales: 300, stock: 80, trend: "stable" },
    { id: 35, name: "Dry Fruits Mix", category: "Snacks", price: 850, sales: 200, stock: 40, trend: "up" },
    { id: 36, name: "Pani Puri Kit", category: "Snacks", price: 200, sales: 900, stock: 70, trend: "up" },

    // --- Dairy & Bakery ---
    { id: 37, name: "Fresh Milk (1L)", category: "Dairy", price: 110, sales: 4200, stock: 100, trend: "stable" },
    { id: 38, name: "Eggs (Crate)", category: "Dairy", price: 450, sales: 1800, stock: 80, trend: "up" },
    { id: 39, name: "White Bread", category: "Bakery", price: 60, sales: 2200, stock: 60, trend: "stable" },

    // --- Beverages ---
    { id: 40, name: "Tea Leaves (CTC)", category: "Beverages", price: 350, sales: 2100, stock: 150, trend: "up" },
    { id: 41, name: "Horlicks (500g)", category: "Beverages", price: 650, sales: 600, stock: 45, trend: "stable" },

    // --- Household & Personal Care ---
    { id: 42, name: "Bathing Soap", category: "Personal Care", price: 55, sales: 3500, stock: 400, trend: "stable" },
    { id: 43, name: "Toothpaste", category: "Personal Care", price: 120, sales: 2800, stock: 300, trend: "up" },
    { id: 44, name: "Washing Powder (1kg)", category: "Household", price: 180, sales: 3000, stock: 350, trend: "up" },
    { id: 45, name: "Safety Matches", category: "Household", price: 20, sales: 6000, stock: 1000, trend: "stable" },
    { id: 46, name: "Candles (Pack)", category: "Household", price: 80, sales: 500, stock: 200, trend: "up" },
    { id: 47, name: "Pooja Thread", category: "Household", price: 15, sales: 1000, stock: 500, trend: "stable" },

    // --- Meat ---
    { id: 48, name: "Fresh Chicken (kg)", category: "Meat", price: 380, sales: 1500, stock: 50, trend: "down" },
];

export const SALES_DATA = [
    { name: "Jan", sales: 4000, profit: 2400 },
    { name: "Feb", sales: 3000, profit: 1398 },
    { name: "Mar", sales: 2000, profit: 9800 },
    { name: "Apr", sales: 2780, profit: 3908 },
    { name: "May", sales: 1890, profit: 4800 },
    { name: "Jun", sales: 2390, profit: 3800 },
    { name: "Jul", sales: 3490, profit: 4300 },
];

export const CATEGORY_DATA = [
    { name: "Apparel", value: 45 },
    { name: "Accessories", value: 30 },
    { name: "Footwear", value: 15 },
    { name: "Outerwear", value: 10 },
];

export const REVENUE_BY_CATEGORY = [
    { name: "Food", value: 220000, percentage: 55, color: "#3b82f6" },
    { name: "Electronics", value: 80000, percentage: 20, color: "#10b981" },
    { name: "Beverage", value: 45000, percentage: 11, color: "#f59e0b" },
    { name: "Hygiene", value: 30000, percentage: 8, color: "#f97316" },
    { name: "Clothing", value: 25000, percentage: 6, color: "#a855f7" },
];

export const SLOW_MOVING_ITEMS = [
    { id: 101, name: "Suji (Semolina)", category: "Grains", daysInStock: 125, stock: 45 },
    { id: 102, name: "Chana (Chickpeas)", category: "Pulses", daysInStock: 98, stock: 60 },
    { id: 103, name: "Masyeura (Dried Lentil Balls)", category: "Traditional Foods", daysInStock: 156, stock: 30 },
];

// Mock API Functions
export const mockPredictionApi = {
    predictPriceImpact: async (productId: number, newPrice: number) => {
        await new Promise((resolve) => setTimeout(resolve, 800));

        const product = TOP_PRODUCTS.find(p => p.id === Number(productId)) || TOP_PRODUCTS[0];
        const priceDiff = newPrice - product.price;
        const elasticity = 1.5;

        const currentRevenue = product.sales * product.price;
        const quantityChangePercent = -(priceDiff / product.price) * elasticity;
        const newQuantity = Math.round(product.sales * (1 + quantityChangePercent));
        const newRevenue = newQuantity * newPrice;

        return {
            currentPrice: product.price,
            newPrice: newPrice,
            currentquantity: product.sales,
            predictedQuantity: Math.max(0, newQuantity),
            currentRevenue: currentRevenue,
            predictedRevenue: Math.max(0, newRevenue),
            sensitivityScore: priceDiff > 0 ? "High" : "Medium",
        };
    },

    predictNewProduct: async (category: string, name: string, price: number) => {
        await new Promise((resolve) => setTimeout(resolve, 1200));

        return {
            predictedSales: Math.floor(Math.random() * 500) + 100,
            suggestedPrice: price * 1.1,
            similarItems: TOP_PRODUCTS.filter(p => p.category === category).slice(0, 2),
        };
    }
};

export const NEPAL_DISTRICTS = [
    "Achham", "Arghakhanchi", "Baglung", "Baitadi", "Bajhang", "Bajura", "Banke", "Bara", "Bardiya", "Bhaktapur",
    "Bhojpur", "Chitwan", "Dadeldhura", "Dailekh", "Dang", "Darchula", "Dhading", "Dhankuta", "Dhanusha", "Dolakha",
    "Dolpa", "Doti", "Gorkha", "Gulmi", "Humla", "Ilam", "Jajarkot", "Jhapa", "Jumla", "Kailali",
    "Kalikot", "Kanchanpur", "Kapilvastu", "Kaski", "Kathmandu", "Kavrepalanchok", "Khotang", "Lalitpur", "Lamjung", "Mahottari",
    "Makwanpur", "Manang", "Morang", "Mugu", "Mustang", "Myagdi", "Nawalparasi East", "Nawalparasi West", "Nuwakot", "Okhaldhunga",
    "Palpa", "Panchthar", "Parbat", "Parsa", "Pyuthan", "Ramechhap", "Rasuwa", "Rautahat", "Rolpa", "Rukum East",
    "Rukum West", "Rupandehi", "Salyan", "Sankhuwasabha", "Saptari", "Sarlahi", "Sindhuli", "Sindhupalchok", "Siraha", "Solukhumbu",
    "Sunsari", "Surkhet", "Syangja", "Tanahu", "Taplejung", "Terhathum", "Udayapur"
];

export const getDistrictTopProducts = (districtName: string) => {
    // Simple seeded random function for consistent server/client rendering
    const seededRandom = (seed: number) => {
        const x = Math.sin(seed++) * 10000;
        return x - Math.floor(x);
    };

    const seed = districtName.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);

    // Create a deterministic shuffle based on district name
    const shuffled = [...TOP_PRODUCTS].sort((a, b) => {
        const seedA = seededRandom(seed + a.id);
        const seedB = seededRandom(seed + b.id);
        return seedA - seedB;
    });

    return shuffled.slice(0, 4).map(p => ({
        ...p,
        sales: Math.floor(p.sales * ((seed % 5) + 0.5) / 2)
    })).sort((a, b) => b.sales - a.sales);
};

export const getProductTopDistricts = (productId: string | number) => {
    const seed = Number(productId) * 17;
    const shuffledDistricts = [...NEPAL_DISTRICTS].sort((a, b) => {
        const valA = (a.length * seed) % 97;
        const valB = (b.length * seed) % 97;
        return valA - valB;
    });

    return shuffledDistricts.slice(0, 5).map((district, index) => ({
        district,
        sales: Math.floor(1000 - (index * 150) + (seed % 100))
    }));
};

